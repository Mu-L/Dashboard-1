import{_ as V,d as S,r as u,u as A,G as L,x as z,o,h as n,e as s,t as W,f as v,b as $,F as m,j as C,g as j,p as k}from"./index.b98115b4.js";const D={class:"img-wrapper"},I=["src"],N={class:"mask"},P=["onClick"],T=["onClick"],F=S({__name:"PersonalWallpaper",setup(H){const p=u(!1),y=()=>{p.value=!0},f=A(),B=L(()=>f.wallpaperCollectionList),t=u([]),d=u(1),g=18,h=u(!0),w=()=>{const e=B.value.slice((d.value-1)*g,d.value*g).map(l=>(l.includes("&w=")?l=l.replace(/&w=\d+/,"&w=256"):l.includes("sinaimg.cn")&&(l=l.replace("large","small")),l));e.length?t.value.push(...e):h.value=!1};let c;const E=e=>{if(!h.value)return;const l=e.target;c&&(clearTimeout(c),c=null),c=setTimeout(()=>{const{scrollTop:i,scrollHeight:_,clientHeight:a}=l,r=_-i-a<=30;r&&(console.log("isReachBottom",r),d.value++,w())},200)},x=e=>{e.includes("&w=")?e=e.replace(/&w=\d+/,"&w=1920"):e.includes("sinaimg.cn")&&(e=e.replace("small","large")),window.open(e)},b=e=>{if(window.confirm("\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u9879?")){const l=t.value.indexOf(e);l>-1&&(t.value.splice(l,1),f.wallpaperCollectionList.splice(l,1))}};return z(()=>{w()}),(e,l)=>{const i=k("Icon"),_=k("easy-dialog");return o(),n(m,null,[s("button",{type:"button",class:"btn btn-primary btn-small",style:{margin:"0","margin-bottom":"10px"},onClick:y},W(e.$t("\u67E5\u770B\u4E2A\u4EBA\u58C1\u7EB8\u5E93")),1),v(_,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=a=>p.value=a),title:e.$t("\u4E2A\u4EBA\u58C1\u7EB8\u5E93"),width:"min(760px, 94vw)",height:"min(480px, 80vh)"},{default:$(()=>[s("div",{class:"content-wrapper",onScroll:E},[(o(!0),n(m,null,C(t.value,a=>(o(),n("div",{class:"item",key:a},[s("div",D,[a?(o(),n("img",{key:0,src:a,loading:"lazy"},null,8,I)):j("",!0),s("div",N,[s("div",{class:"icon-jump",onClick:r=>x(a)},[v(i,{name:"jump",size:"18"})],8,P),s("div",{class:"icon-delete",onClick:r=>b(a)},[v(i,{name:"delete",size:"18"})],8,T)])])]))),128)),(o(),n(m,null,C(4,a=>s("div",{class:"item-fake",key:a})),64))],32)]),_:1},8,["modelValue","title"])],64)}}});var O=V(F,[["__scopeId","data-v-5a111328"]]);export{O as default};
