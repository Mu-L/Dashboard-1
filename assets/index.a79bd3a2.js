import{W as h,X as I,d as N,r as _,w as J,G as f,_ as O,o as r,j as c,g as i,t as C,F as Y,l as L,D as q,E as z,p as B,q as F,u as H,x as R,L as M,h as Z,f as K,Y as W,N as $,Z as G,R as E}from"./index.ffc16ffa.js";import{g as X,l as Q}from"./color.556e4bcb.js";h.extend(I);const U=N({name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:o}){const l=_("");J(()=>e.date,v=>{l.value=h(v).format("YYYY-MM")},{immediate:!0});const y=["S","M","T","W","T","F","S"],a=f(()=>{const v=h().month(h(l.value).month()).startOf("month");let g=h().week(h(v).week()).startOf("week");const S=[];for(let D=0;D<35;D++){const A=~~g.format("DD"),P=g.format("YYYY-MM-DD"),T=~~g.format("MM");S.push({label:A,value:P,month:T}),g=g.add(1,"d")}return S}),b=f(()=>~~h(l.value).format("MM")),n=f(()=>h(l.value).format("MMM, YYYY")),m=f(()=>Object.keys(e.todo).filter(v=>e.todo[v].some(g=>!g.isChecked)));return{weekStrArr:y,dayList:a,selectedMonth:b,labelMonth:n,hasTodoListDates:m,handleClickDay:v=>o("selectDate",v),handlePrevClick:()=>{l.value=h(l.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{l.value=h(l.value).add(1,"month").format("YYYY-MM")}}}}),j=e=>(B("data-v-1bb6d588"),e=e(),F(),e),ee={class:"calendar__date"},te=j(()=>i("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[i("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)),oe=[te],ae={class:"calendar__head content"},ie=j(()=>i("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[i("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)),ne=[ie],de=["onClick"];function se(e,o,l,y,a,b){return r(),c("div",{class:"date-picker",style:z({"--themeTextColor1":e.isDark?"#fff":"#464646","--themeTextColor2":e.isDark?"#464646":"#fff"})},[i("div",ee,[i("div",{class:"calendar__head prev",onClick:o[0]||(o[0]=(...n)=>e.handlePrevClick&&e.handlePrevClick(...n))},oe),i("div",ae,C(e.labelMonth),1),i("div",{class:"calendar__head next",onClick:o[1]||(o[1]=(...n)=>e.handleNextClick&&e.handleNextClick(...n))},ne),(r(!0),c(Y,null,L(e.weekStrArr,(n,m)=>(r(),c("div",{class:"calendar__day",key:n+m},C(n),1))),128)),(r(!0),c(Y,null,L(e.dayList,n=>(r(),c("div",{class:q(["calendar__number",{"not-this-month":n.month!==e.selectedMonth,active:n.value===e.date,tips:e.hasTodoListDates.includes(n.value)}]),key:n.value,onClick:m=>e.handleClickDay(n)},C(n.label),11,de))),128))])],4)}var le=O(U,[["render",se],["__scopeId","data-v-1bb6d588"]]);const re=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ce=N({name:"TodoList",components:{DatePicker:le},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(e){const o=H(),l=f(()=>X(e.componentSetting.themeColor||"#643a7a")<150),y=f(()=>Q(e.componentSetting.themeColor||"#643a7a",l.value?50:-50)),a=_(),b=_(),n=_(270);R(()=>{var t,s;a.value=h().format("YYYY-MM-DD"),(s=(t=b.value)==null?void 0:t.$el)!=null&&s.offsetHeight&&(n.value=b.value.$el.offsetHeight+30)});const m=_(""),d=_(!1),u=f(()=>e.componentSetting.todo[a.value]||[]),p=f(()=>re[new Date(a.value).getDay()]),v=f(()=>{const t=new Date(a.value).toDateString().split(" ");return`${t[1]} ${t[2]}, ${t[3]}`});return{weekDay:p,formatterDate:v,todoList:u,handleChecked:t=>{const s=!u.value[t].isChecked,k=JSON.parse(JSON.stringify(e.element));e.isAction?(k.actionSetting.actionClickValue.componentSetting.todo[a.value][t].isChecked=s,o.updateActionElement(k)):k.componentSetting.todo[a.value][t].isChecked=s,o.editComponent(k)},handleRemove:t=>{const s=JSON.parse(JSON.stringify(e.element));e.isAction?(s.actionSetting.actionClickValue.componentSetting.todo[a.value].splice(t,1),o.updateActionElement(s)):s.componentSetting.todo[a.value].splice(t,1),o.editComponent(s)},handleAdd:()=>{m.value="";const t=JSON.parse(JSON.stringify(e.element)),s={content:"",isChecked:!1,isEditing:!0};e.isAction?(t.actionSetting.actionClickValue.componentSetting.todo[a.value]?t.actionSetting.actionClickValue.componentSetting.todo[a.value].push(s):t.actionSetting.actionClickValue.componentSetting.todo[a.value]=[s],o.updateActionElement(t)):t.componentSetting.todo[a.value]?t.componentSetting.todo[a.value].push(s):t.componentSetting.todo[a.value]=[s],o.editComponent(t)},handleEditSubmit:(t,s,k)=>{if(s.isEditing){const w=JSON.parse(JSON.stringify(e.element)),x=e.isAction?w.actionSetting.actionClickValue.componentSetting.todo[a.value]:w.componentSetting.todo[a.value];t.currentTarget.value?(x[k].content=m.value=t.currentTarget.value,x[k].isEditing=!1):x.splice(k,1),e.isAction&&o.updateActionElement(w),o.editComponent(w)}},editingValue:m,showDatePicker:d,date:a,updateDate:t=>{a.value=t.value},themeLightColor:y,isDark:l,dateTimePickerDom:b,pickerHeight:n,contextmenu:t=>{o.isLock&&t.stopPropagation()}}}}),V=e=>(B("data-v-607f9d98"),e=e(),F(),e),he={class:"head"},me={class:"list"},ue=["checked"],pe=["onClick"],ve=["value","onBlur","onKeyup"],fe=["onClick"],ge={class:"wrapper"},ke=["width","height"],be=V(()=>i("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1)),_e=[be],Ce=["onClick"],ye=["width","height"],we=V(()=>i("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1)),Se=[we],De={viewBox:"0 0 1024 1024",width:"20",height:"20"},xe=["fill"];function Me(e,o,l,y,a,b){const n=K("DatePicker"),m=W("focus");return r(),c("div",{class:"todo-list-card",style:z({"--themeColor":e.componentSetting.themeColor,"--themeLightColor":e.themeLightColor,fontSize:e.componentSetting.baseFontSize+"px",padding:e.componentSetting.padding+"px"}),onContextmenu:o[3]||(o[3]=(...d)=>e.contextmenu&&e.contextmenu(...d))},[i("div",he,[i("div",{class:"title",onClick:o[0]||(o[0]=M(d=>e.showDatePicker=!e.showDatePicker,["stop"]))},C(e.weekDay),1),i("div",{class:"subtitle",onClick:o[1]||(o[1]=M(d=>e.showDatePicker=!e.showDatePicker,["stop"]))},C(e.formatterDate),1),i("div",{class:"picker",style:z(e.showDatePicker?`border-bottom: 1px solid var(--themeLightColor); height: ${e.pickerHeight}px`:"")},[Z(n,{ref:"dateTimePickerDom",date:e.date,todo:e.componentSetting.todo,onSelectDate:e.updateDate,isDark:e.isDark},null,8,["date","todo","onSelectDate","isDark"])],4)]),i("ul",me,[(r(!0),c(Y,null,L(e.todoList,(d,u)=>(r(),c("li",{class:"list-item",key:d.content+u},[i("input",{type:"checkbox",name:"todo",checked:d.isChecked},null,8,ue),d.isEditing?$((r(),c("input",{key:1,type:"text",class:"edit",value:e.editingValue,onBlur:p=>e.handleEditSubmit(p,d,u),onKeyup:G(p=>e.handleEditSubmit(p,d,u),["enter"])},null,40,ve)),[[m]]):(r(),c("div",{key:0,class:"text",onClick:p=>e.handleChecked(u)},C(d.content),9,pe)),$(i("div",{class:"button",onClick:p=>e.handleChecked(u)},null,8,fe),[[E,!d.isChecked]]),$(i("div",ge,[(r(),c("svg",{viewBox:"0 0 98.5 98.5",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},_e,8,ke))],512),[[E,d.isChecked]]),i("div",{class:"close",onClick:M(p=>e.handleRemove(u),["stop"])},[(r(),c("svg",{viewBox:"0 0 1024 1024",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},Se,8,ye))],8,Ce)]))),128))]),i("div",{class:"add",onClick:o[2]||(o[2]=(...d)=>e.handleAdd&&e.handleAdd(...d))},[(r(),c("svg",De,[i("path",{fill:e.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,xe)]))])],36)}var Le=O(ce,[["render",Me],["__scopeId","data-v-607f9d98"]]);export{Le as default};
