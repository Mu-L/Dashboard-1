var A=Object.defineProperty;var S=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var _=(t,e,n)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f=(t,e)=>{for(var n in e||(e={}))F.call(e,n)&&_(t,n,e[n]);if(S)for(var n of S(e))E.call(e,n)&&_(t,n,e[n]);return t};import{_ as T,d as j,u as z,G as w,r as g,x as B,y as $,w as q,o as i,j as s,g as c,E as d,i as r,F as D,l as N,m as k,p as P,q as U,H as V,t as x,P as G}from"./index.7b0c689e.js";const H=t=>(P("data-v-1c9fb5f7"),t=t(),U(),t),M={class:"weibo"},O=H(()=>c("div",{class:"logo-text"},"\u5FAE\u535A\u70ED\u641C",-1)),R={key:1,class:"loading"},W={key:2,class:"error"},J={key:3,class:"list"},K={class:"num",style:{width:"24px",height:"24px"}},Q=["src"],X={class:"title"},Y=["href"],Z={key:0,class:"count"},tt={class:"icon",style:{width:"24px",height:"24px"}},et=["src"],ot=j({name:"index",props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=z(),b=w(()=>n.isLock),C="https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",m=g([]),u=g(!1),p=g(!1),v=async()=>{try{u.value=!0,p.value=!1;const l=await fetch(`${G}/api/weiboList?limit=${e.componentSetting.limit||10}`),{list:y}=await l.json();m.value=y.map(o=>({num:o.pic,id:o.desc,title:o.desc,icon:o.icon,link:o.scheme,count:~~(o.desc_extr/1e4)}))}catch(l){p.value=!0,console.error(l)}finally{u.value=!1}};let a;function h(){v(),a&&window.clearInterval(a),a=window.setInterval(()=>{v()},e.componentSetting.duration*60*1e3)}B(()=>h()),$(()=>window.clearInterval(a)),q(()=>[e.componentSetting.duration,e.componentSetting.limit],()=>h());const I=w(()=>V(e.componentSetting.position)),L=()=>{e.componentSetting.clickActionType===1?h():e.componentSetting.clickActionType===2&&window.open("https://weibo.com/")};return(l,y)=>(i(),s("div",{class:"wrapper",style:d(f({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},k(I)))},[c("div",M,[t.componentSetting.showTitle!==!1?(i(),s("div",{key:0,class:"logo",style:d({cursor:t.componentSetting.clickActionType?"pointer":"default"}),onClick:L},[c("img",{src:C,alt:"Weibo",style:d({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,4),O],4)):r("",!0),u.value?(i(),s("div",R,"Loading...")):p.value?(i(),s("div",W,"Something error!")):(i(),s("div",J,[(i(!0),s(D,null,N(m.value,o=>(i(),s("div",{class:"list-item",key:o.id},[c("div",K,[o.num?(i(),s("img",{key:0,src:o.num,style:{width:"100%",height:"100%"}},null,8,Q)):r("",!0)]),c("div",X,[c("a",{href:o.link,target:"_blank",style:d(k(b)?"":"pointer-events: none")},x(o.title),13,Y)]),o.count?(i(),s("div",Z,x(o.count)+"w",1)):r("",!0),c("div",tt,[o.icon?(i(),s("img",{key:0,src:o.icon,style:{width:"100%",height:"100%"}},null,8,et)):r("",!0)])]))),128))]))])],4))}});var st=T(ot,[["__scopeId","data-v-1c9fb5f7"]]);export{st as default};
