import{_ as w,d as F,r as u,w as T,y as v,G as x,x as C,o as r,j as d,g as h,t as m,E as l,i as y,W as D,H as E}from"./index.87588bc9.js";const _=F({name:"Clock",props:{componentSetting:{type:Object,required:!0}},setup(t){function o(){let e="",n=t.componentSetting.formatter==="\u81EA\u5B9A\u4E49"?t.componentSetting.custom:t.componentSetting.formatter;try{if(t.componentSetting.chineseWeekDay&&n.includes("dddd")){const c=["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"];n=n.replace("dddd",()=>{try{return c[new Date().getDay()]}catch{return"dddd"}})}e=D().format(n)}catch(c){e="Dayjs\u683C\u5F0F\u5316\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u683C\u5F0F\u5316\u6587\u672C",console.error(c)}return e}const a=u(o());let i;function s(){var e;a.value=o(),i=window.setInterval(()=>{a.value=o()},((e=t.componentSetting)==null?void 0:e.duration)*1e3||5e3)}s(),T(()=>[t.componentSetting.duration,t.componentSetting.formatter,t.componentSetting.custom,t.componentSetting.chineseWeekDay,t.componentSetting.showTTS1,t.componentSetting.showTTS2],()=>{window.clearInterval(i),s(),f()}),v(()=>{window.clearInterval(i)});const p=x(()=>E(t.componentSetting.position)),S=u(""),g=u(""),f=async()=>{try{if(t.componentSetting.showTTS1){const e=await fetch("https://timor.tech/api/holiday/tts/tomorrow"),{tts:n}=await e.json();S.value=n}if(t.componentSetting.showTTS2){const e=await fetch("https://timor.tech/api/holiday/tts/next"),{tts:n}=await e.json();g.value=n}}catch{}};return C(()=>{f()}),{day:a,positionCSS:p,ttsText1:S,ttsText2:g}}}),j={class:"text-wrapper"},k={class:"day"};function z(t,o,a,i,s,p){return r(),d("div",{class:"wrapper",style:l({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily,...t.positionCSS})},[h("div",j,[h("div",k,m(t.day),1),t.componentSetting.showTTS1&&t.ttsText1?(r(),d("div",{key:0,class:"tts",style:l({fontSize:t.componentSetting.ttsFontSize+"px"})},m(t.ttsText1),5)):y("",!0),t.componentSetting.showTTS2&&t.ttsText2?(r(),d("div",{key:1,class:"tts",style:l({fontSize:t.componentSetting.ttsFontSize+"px"})},m(t.ttsText2),5)):y("",!0)])],4)}var I=w(_,[["render",z],["__scopeId","data-v-25f3e8c8"]]);export{I as default};
