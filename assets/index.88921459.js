var v=Object.defineProperty;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var y=(t,e,n)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))x.call(e,n)&&y(t,n,e[n]);if(h)for(var n of h(e))C.call(e,n)&&y(t,n,e[n]);return t};import{_ as D,d as E,r as u,w as _,y as j,G as k,x as z,o as r,j as d,g as F,t as m,E as l,i as T,W as B,H as I}from"./index.ffc16ffa.js";const W=E({name:"Clock",props:{componentSetting:{type:Object,required:!0}},setup(t){function e(){let o="",a=t.componentSetting.formatter==="\u81EA\u5B9A\u4E49"?t.componentSetting.custom:t.componentSetting.formatter;try{if(t.componentSetting.chineseWeekDay&&a.includes("dddd")){const c=["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"];a=a.replace("dddd",()=>{try{return c[new Date().getDay()]}catch{return"dddd"}})}o=B().format(a)}catch(c){o="Dayjs\u683C\u5F0F\u5316\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u683C\u5F0F\u5316\u6587\u672C",console.error(c)}return o}const n=u(e());let i;function s(){var o;n.value=e(),i=window.setInterval(()=>{n.value=e()},((o=t.componentSetting)==null?void 0:o.duration)*1e3||5e3)}s(),_(()=>[t.componentSetting.duration,t.componentSetting.formatter,t.componentSetting.custom,t.componentSetting.chineseWeekDay,t.componentSetting.showTTS1,t.componentSetting.showTTS2],()=>{window.clearInterval(i),s(),f()}),j(()=>{window.clearInterval(i)});const p=k(()=>I(t.componentSetting.position)),S=u(""),g=u(""),f=async()=>{try{if(t.componentSetting.showTTS1){const o=await fetch("https://timor.tech/api/holiday/tts/tomorrow"),{tts:a}=await o.json();S.value=a}if(t.componentSetting.showTTS2){const o=await fetch("https://timor.tech/api/holiday/tts/next"),{tts:a}=await o.json();g.value=a}}catch{}};return z(()=>{f()}),{day:n,positionCSS:p,ttsText1:S,ttsText2:g}}}),$={class:"text-wrapper"},A={class:"day"};function N(t,e,n,i,s,p){return r(),d("div",{class:"wrapper",style:l(w({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},t.positionCSS))},[F("div",$,[F("div",A,m(t.day),1),t.componentSetting.showTTS1&&t.ttsText1?(r(),d("div",{key:0,class:"tts",style:l({fontSize:t.componentSetting.ttsFontSize+"px"})},m(t.ttsText1),5)):T("",!0),t.componentSetting.showTTS2&&t.ttsText2?(r(),d("div",{key:1,class:"tts",style:l({fontSize:t.componentSetting.ttsFontSize+"px"})},m(t.ttsText2),5)):T("",!0)])],4)}var q=D(W,[["render",N],["__scopeId","data-v-25f3e8c8"]]);export{q as default};
