import{_ as E,d as $,r as s,x as X,y as Y,w as D,o as m,c as N,h as w,b as V,z as j,A as L,f as M,j as z,C as U,i as I,D as q,E as F}from"./index.e665cea8.js";import{g as O}from"./direction.8b21c0ae.js";const G=$({__name:"ActionPopover",props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0},zIndex:{type:Number,default:2001}},emits:["opend","closed"],setup(u,{expose:P,emit:h}){const S=u,t=s(!1),i=s(!1),p=s(""),x=s();X(()=>{document.addEventListener("click",g)}),Y(()=>{document.removeEventListener("click",g)});const g=e=>{!S.closeOnClickOutside||t.value&&!x.value.contains(e.target)&&(t.value=!1)},n=s({width:200,height:200,top:0,left:0}),_=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:a}=e,{actionType:f,actionClickType:c,actionClickValue:l}=a;if(f===1&&c===1){const{w:r,h:d,direction:y}=l,[C,k,A,B]=O(o,{width:r||200,height:d||200},y);n.value={width:r||200,height:d||200,left:C,top:k},p.value=`${A-C}px ${B-k}px`,t.value=!0,i.value=y===0}})},v=()=>{t.value=!1,i.value=!1},T=(e,o)=>{t.value?v():_(e,o)},b=({w:e,h:o,direction:a},f)=>{setTimeout(()=>{const[c,l,r,d]=O(f,{width:e||200,height:o||200},a);n.value={width:e||200,height:o||200,left:c,top:l},p.value=`${r-c}px ${d-l}px`,t.value=!0,i.value=a===0})};return D(()=>t.value,e=>{h(e?"opend":"closed")}),P({open:_,close:v,toggle:T,defaultOpen:b}),(e,o)=>{const a=M("Icon");return m(),N(L,{to:"body"},[w(j,{name:"zoomIn"},{default:V(()=>[t.value?(m(),z("div",{key:0,ref_key:"actionPopover",ref:x,class:q(["action-popover",u.popoverCustomClass]),style:F({width:n.value.width+"px",height:n.value.height+"px",top:n.value.top+"px",left:n.value.left+"px",transformOrigin:p.value,zIndex:u.zIndex})},[U(e.$slots,"default",{},void 0,!0),i.value?(m(),z("div",{key:0,class:"close",onClick:v},[w(a,{name:"close"})])):I("",!0)],6)):I("",!0)]),_:3})])}}});var K=E(G,[["__scopeId","data-v-50df7cdc"]]);export{K as default};
