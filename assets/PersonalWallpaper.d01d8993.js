import{_ as V,d as S,r as i,u as A,G as L,x as z,o as n,h as o,e as s,t as W,f as v,b as $,F as h,j as C,g as j,p as k}from"./index.41c23f99.js";const D={class:"img-wrapper"},I=["src"],N={class:"mask"},P=["onClick"],T=["onClick"],F=S({__name:"PersonalWallpaper",setup(H){const p=i(!1),y=()=>{p.value=!0},f=A(),B=L(()=>f.wallpaperCollectionList),t=i([]),d=i(1),g=18,m=i(!0),w=()=>{const e=B.value.slice((d.value-1)*g,d.value*g).map(l=>(l.includes("&w=")||l.includes("&h=")?(l=l.replace(/&w=\d+/,"&w=256"),l=l.replace(/&h=\d+/,"&h=144")):l.includes("sinaimg.cn")&&(l=l.replace("large","small")),l));e.length?t.value.push(...e):m.value=!1};let c;const E=e=>{if(!m.value)return;const l=e.target;c&&(clearTimeout(c),c=null),c=setTimeout(()=>{const{scrollTop:r,scrollHeight:_,clientHeight:a}=l,u=_-r-a<=30;u&&(console.log("isReachBottom",u),d.value++,w())},200)},x=e=>{e.includes("&w=")||e.includes("&h=")?(e=e.replace(/&w=\d+/,"&w=1920"),e=e.replace(/&h=\d+/,"&h=1080")):e.includes("sinaimg.cn")&&(e=e.replace("small","large")),window.open(e)},b=e=>{if(window.confirm("\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u9879?")){const l=t.value.indexOf(e);l>-1&&(t.value.splice(l,1),f.wallpaperCollectionList.splice(l,1))}};return z(()=>{w()}),(e,l)=>{const r=k("Icon"),_=k("easy-dialog");return n(),o(h,null,[s("button",{type:"button",class:"btn btn-primary btn-small",style:{margin:"0","margin-bottom":"10px"},onClick:y},W(e.$t("\u67E5\u770B\u4E2A\u4EBA\u58C1\u7EB8\u5E93")),1),v(_,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=a=>p.value=a),title:e.$t("\u4E2A\u4EBA\u58C1\u7EB8\u5E93"),width:"min(760px, 94vw)",height:"min(480px, 80vh)"},{default:$(()=>[s("div",{class:"content-wrapper",onScroll:E},[(n(!0),o(h,null,C(t.value,a=>(n(),o("div",{class:"item",key:a},[s("div",D,[a?(n(),o("img",{key:0,src:a,loading:"lazy"},null,8,I)):j("",!0),s("div",N,[s("div",{class:"icon-jump",onClick:u=>x(a)},[v(r,{name:"jump",size:"18"})],8,P),s("div",{class:"icon-delete",onClick:u=>b(a)},[v(r,{name:"delete",size:"18"})],8,T)])])]))),128)),(n(),o(h,null,C(4,a=>s("div",{class:"item-fake",key:a})),64))],32)]),_:1},8,["modelValue","title"])],64)}}});var O=V(F,[["__scopeId","data-v-1cf790ec"]]);export{O as default};
