import{_ as k,d as L,u as C,G as v,r as p,x as F,y as b,w as z,o as n,j as o,g as a,E as u,i as A,F as I,l as T,m as h,H as $,t as w,P as B}from"./index.87588bc9.js";const D={class:"juejin"},E={key:0,class:"logo"},N={key:1,class:"loading"},P={key:2,class:"error"},U={key:3,class:"list"},V={class:"title"},q=["href"],G={class:"like"},H=L({__name:"index",props:{componentSetting:{type:Object,required:!0}},setup(t){const i=t,j=C(),S=v(()=>j.isLock),_="https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/logo.a7995ad.svg",m=p([]),c=p(!1),r=p(!1),g=async()=>{try{c.value=!0,r.value=!1;const l=await fetch(`${B}/api/juejinList?limit=${i.componentSetting.limit||10}`),{list:f}=await l.json();m.value=f.map(e=>({id:e.article_id,title:e.title,like:e.digg_count,view:e.view_count}))}catch(l){r.value=!0,console.error(l)}finally{c.value=!1}};let s;function d(){g(),s&&window.clearInterval(s),s=window.setInterval(()=>{g()},i.componentSetting.duration*60*1e3)}F(()=>d()),b(()=>window.clearInterval(s)),z(()=>[i.componentSetting.duration,i.componentSetting.limit],()=>d());const y=v(()=>$(i.componentSetting.position)),x=()=>{i.componentSetting.clickActionType===1?d():i.componentSetting.clickActionType===2&&window.open("https://juejin.cn/")};return(l,f)=>(n(),o("div",{class:"wrapper",style:u({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily,...h(y)})},[a("div",D,[t.componentSetting.showTitle!==!1?(n(),o("div",E,[a("img",{src:_,style:u({filter:`drop-shadow(${t.componentSetting.iconShadow})`,cursor:t.componentSetting.clickActionType?"pointer":"default"}),alt:"Juejin",onClick:x},null,4)])):A("",!0),c.value?(n(),o("div",N,"Loading...")):r.value?(n(),o("div",P,"Something error!")):(n(),o("div",U,[(n(!0),o(I,null,T(m.value,e=>(n(),o("div",{class:"list-item",key:e.id},[a("div",V,[a("a",{href:`https://juejin.cn/post/${e.id}`,target:"_blank",style:u(h(S)?"":"pointer-events: none")},w(e.title),13,q)]),a("div",G,"\u{1F44D}"+w(e.like),1)]))),128))]))])],4))}});var M=k(H,[["__scopeId","data-v-189f5c74"]]);export{M as default};
