import{_ as C,d as I,u as L,G as m,r as h,x as z,y as A,w as F,o,j as i,g as s,E as l,i as r,F as E,l as T,m as v,p as j,q as B,H as $,t as y,P as q}from"./index.87588bc9.js";const D=e=>(j("data-v-1c9fb5f7"),e=e(),B(),e),N={class:"weibo"},P=D(()=>s("div",{class:"logo-text"},"\u5FAE\u535A\u70ED\u641C",-1)),U={key:1,class:"loading"},V={key:2,class:"error"},G={key:3,class:"list"},H={class:"num",style:{width:"24px",height:"24px"}},M=["src"],O={class:"title"},R=["href"],W={key:0,class:"count"},J={class:"icon",style:{width:"24px",height:"24px"}},K=["src"],Q=I({__name:"index",props:{componentSetting:{type:Object,required:!0}},setup(e){const n=e,_=L(),x=m(()=>_.isLock),S="https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",u=h([]),d=h(!1),p=h(!1),w=async()=>{try{d.value=!0,p.value=!1;const c=await fetch(`${q}/api/weiboList?limit=${n.componentSetting.limit||10}`),{list:g}=await c.json();u.value=g.map(t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)}))}catch(c){p.value=!0,console.error(c)}finally{d.value=!1}};let a;function f(){w(),a&&window.clearInterval(a),a=window.setInterval(()=>{w()},n.componentSetting.duration*60*1e3)}z(()=>f()),A(()=>window.clearInterval(a)),F(()=>[n.componentSetting.duration,n.componentSetting.limit],()=>f());const b=m(()=>$(n.componentSetting.position)),k=()=>{n.componentSetting.clickActionType===1?f():n.componentSetting.clickActionType===2&&window.open("https://weibo.com/")};return(c,g)=>(o(),i("div",{class:"wrapper",style:l({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily,...v(b)})},[s("div",N,[e.componentSetting.showTitle!==!1?(o(),i("div",{key:0,class:"logo",style:l({cursor:e.componentSetting.clickActionType?"pointer":"default"}),onClick:k},[s("img",{src:S,alt:"Weibo",style:l({filter:`drop-shadow(${e.componentSetting.iconShadow})`})},null,4),P],4)):r("",!0),d.value?(o(),i("div",U,"Loading...")):p.value?(o(),i("div",V,"Something error!")):(o(),i("div",G,[(o(!0),i(E,null,T(u.value,t=>(o(),i("div",{class:"list-item",key:t.id},[s("div",H,[t.num?(o(),i("img",{key:0,src:t.num,style:{width:"100%",height:"100%"}},null,8,M)):r("",!0)]),s("div",O,[s("a",{href:t.link,target:"_blank",style:l(v(x)?"":"pointer-events: none")},y(t.title),13,R)]),t.count?(o(),i("div",W,y(t.count)+"w",1)):r("",!0),s("div",J,[t.icon?(o(),i("img",{key:0,src:t.icon,style:{width:"100%",height:"100%"}},null,8,K)):r("",!0)])]))),128))]))])],4))}});var Y=C(Q,[["__scopeId","data-v-1c9fb5f7"]]);export{Y as default};
